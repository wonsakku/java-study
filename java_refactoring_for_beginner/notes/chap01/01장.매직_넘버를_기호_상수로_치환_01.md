# 1장. 매직 넘버를 기호 상수로 치환  

<br><br>

## 1.1 리팩토링  

___

<br>


### 1.1.1 매직 넘버를 기호 상수로 치환  

<br>

소스 코드에 특정한 숫자(***매직 넘버***)를 직접 적는 건 좋지 않는 코딩 스타일  
"입력 가능한 문자열 길이는 100 문자 이하" 라는 제한이 있다고 했을 때,  
문자열 길이 한계인 100이라는 숫자를 조건 판단 부분에 직접 적는 건 좋지 않음. 

<br>

> 매직 넘버를 써선 안되는 이유  
1. 매직 넘버의 의미를 알기 어렵다.   
    - 소스 코드에 100이라고 적혀 있으면 무엇을 뜻하는지 바로 알기 어렵다.   
    100 대신 MAX_INPUT_LENGTH 라는 상징이 되는 이름을 사용하면 의미를 알기 쉽다. (상수 사용)     


2. 매직 넘버는 수정하기 어려움  
    - 훗날 사양이 변해서 문자열 길이 제한으로 변경될 수 있음. (ex > 100 -> 200)  
        * 100이라는 매직넘버가 이곳저곳에 박혀 있을 수 있다. 
        * 100이라는 숫자 전부가 최대 입력 길이를 의미하지 않을 수 있기 때문에, 100을 전부 200으로 치환할 수도 없다. 

<br>

> 리팩토링 카탈로그(매직 넘버를 기호 상수로 치환)    
* 상황  
    * 상수를 사용함.
* 문제  
    * 매직 넘버는 의미를 알기 어려움  
    * 매직 넘버가 여러 곳에 있으면 변경하기 어려움.  
* 해법  
    * 매직 넘버를 기호 상수로 치환함.  
* 결과  
    * ○ 상수의 의미를 알기 쉬워짐  
    * ○ 기호 상수의 값을 변경하면 상수를 사용하는 모든 곳이 변경됨.  
    * X 이해하기 어려운 이름을 사용하면 오해가 생길 수 있음.
* 방법  
    1. 기호 상수 선언하기  
        1. 기호 상수 선언  
        2. 매직 넘버를 기호 상수로 치환  
        3. 기호 상수에 의존하는 다른 매직 넘버를 찾아서 기호 상수를 사용한 표현식으로 변환  
        4. 컴파일. 
    2. 테스트
        1. 모든 기호 상수 치환이 끝나면 컴파일해서 테스트  
        2. 가능하다면 기호 상수값을 변경한 후 컴파일해서 테스트
* 관련항목  
    * 분류 코드를 클래스로 치환(7장)  
        * 상수가 분류 코드로 쓰인다면 클래스로 치환하는 방법이 좋을 때도 있음. 
    * 분류 코드를 상태/전략 패턴으로 치환  
        * 상수가 분류 코드로 쓰인다면 상태/전략 패턴을 사용하는 방법도 있음.  


